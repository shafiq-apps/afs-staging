{% style %}
{% unless block.settings.font_family.system? %}
  {{ block.settings.font_family | font_face: font_display: 'swap' }}
{% endunless %}
{% endstyle %}

<style>
  :root {
    --afs-font-family: {{ block.settings.font_family.family }}, {{ block.settings.body_font.fallback_families }};
    --afs-font-weight: {{ block.settings.font_family.weight | default: "400" }};
    --afs-font-style: {{ block.settings.font_family.style | default: "normal" }};
    --afs-text-color: {{ block.settings.text_color }};
    --afs-text-color-inverse: {{ block.settings.text_color_inverse }};
    --afs-bg-color: {{ block.settings.bg_color }};
    --afs-bg-color-inverse: {{ block.settings.bg_color_inverse }};
    --afs-bg-secondary: {{ block.settings.bg_secondary }};
    --afs-border-color: {{ block.settings.border_color }};
    --afs-accent-color: {{ block.settings.accent_color }};
    --afs-accent-color-inverse: {{ block.settings.accent_color_inverse }};
    --afs-accent-color-hover: {{ block.settings.accent_color_hover }};
    --afs-shadow-color: {{ block.settings.shadow_color }};
    --afs-shadow-color-medium: {{ block.settings.shadow_color_medium }};
    --afs-shadow-color-strong: {{ block.settings.shadow_color_strong }};
  }
</style>

{{ 'digitalcoo-filter.min.css' | asset_url | stylesheet_tag }}

<div data-afs-container id="afs-container-{{ block.id }}" data-afs-layout="{{ block.settings.filter_alignment }}">
  {% comment %} Search bar for search template {% endcomment %}
  {% if template.name == 'search' %}
    <div class="afs-search-bar" data-afs-search-bar style="display: none;">
      <form class="afs-search-bar__form" data-afs-search-form>
        <button type="submit" class="afs-search-bar__submit" aria-label="Search">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </button>
        <input 
          type="text" 
          class="afs-search-bar__input" 
          data-afs-search-input
          placeholder="Search products..." 
          value="{{ search.terms | escape }}"
          aria-label="Search products"
        />
      </form>
    </div>
  {% endif %}
  {% comment %} Container will be populated by JavaScript {% endcomment %}
</div>

<script src="{{ 'digitalcoo-filter.min.js' | asset_url }}" defer></script>

{% render 'digitalcoo-filter-init', block: block %}

{% schema %}
{
  "name": "Digitalcoo Filters",
  "target": "section",
  "settings": [
	{
		"type": "header",
		"content": "Font Configuration"
	},
	{
		"type": "font_picker",
		"id": "font_family",
		"label": "Font Family",
		"default": "helvetica_n4",
		"info": "CSS font-family value"
	},
	{
		"type": "radio",
		"id": "filter_alignment",
		"label": "Filter alignment",
		"options": [
			{
				"value": "left",
				"label": "Left"
			},
			{
				"value": "top",
				"label": "Top"
			}
		],
		"default": "left"
	},
	{
		"type": "number",
		"id": "page_size",
		"label": "Products per page",
		"default": 24,
		"info": "Maximum number of products to load per page"
	},
	{
		"type": "checkbox",
		"id": "enable_logging",
		"label": "Enable Debug Logging",
		"default": false,
		"info": "Enable console logging for debugging"
	},
	{
		"type": "header",
		"content": "Text Colors"
	},
	{
		"type": "color",
		"id": "text_color",
		"label": "Text Color",
		"default": "#000000"
	},
	{
		"type": "color",
		"id": "text_color_inverse",
		"label": "Text Color (Inverse)",
		"default": "#ffffff",
		"info": "Used for text on dark backgrounds"
	},
	{
		"type": "header",
		"content": "Background Colors"
	},
	{
		"type": "color",
		"id": "bg_color",
		"label": "Background Color",
		"default": "#ffffff"
	},
	{
		"type": "color",
		"id": "bg_color_inverse",
		"label": "Background Color (Inverse)",
		"default": "#000000",
		"info": "Used for dark backgrounds"
	},
	{
		"type": "color",
		"id": "bg_secondary",
		"label": "Secondary Background",
		"default": "#f5f5f5",
		"info": "Used for secondary backgrounds and image containers"
	},
	{
		"type": "header",
		"content": "Border & Accent Colors"
	},
	{
		"type": "color",
		"id": "accent_color",
		"label": "Accent Color",
		"default": "#000000",
		"info": "Used for buttons, links, and active states"
	},
	{
		"type": "color",
		"id": "accent_color_inverse",
		"label": "Accent Color (Inverse)",
		"default": "#ffffff",
		"info": "Used for buttons, links, and active states"
	},
	{
		"type": "color",
		"id": "accent_color_hover",
		"label": "Accent Color (Hover)",
		"default": "#1a1a1a",
		"info": "Used for hover states on buttons and links"
	},
	{
		"type": "color",
		"id": "border_color",
		"label": "Border Color",
		"default": "#e5e5e5"
	},
	{
		"type": "header",
		"content": "Shadow Colors"
	},
	{
		"type": "color_background",
		"id": "shadow_color",
		"label": "Shadow Color (Light)",
		"default": "rgba(0, 0, 0, 0.1)"
	},
	{
		"type": "color_background",
		"id": "shadow_color_medium",
		"label": "Shadow Color (Medium)",
		"default": "rgba(0, 0, 0, 0.2)"
	},
	{
		"type": "color_background",
		"id": "shadow_color_strong",
		"label": "Shadow Color (Strong)",
		"default": "rgba(0, 0, 0, 0.25)"
	}
]
}
{% endschema %}