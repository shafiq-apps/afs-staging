{% comment %}
  Advanced Filter Search - Main Settings (App Embed Block)
  This block controls the main enable/disable switch for AFS functionality
  and optional debug logging settings
{% endcomment %}

{% if block.settings.enable_afs %}
  <script>
    // Enable AFS functionality
    window.AFS_ENABLED = true;
    
    {% if block.settings.enable_logging %}
      // Enable logger from block settings
      window.AFS_LOGGER_ENABLED = true;
      {% if block.settings.log_level %}
        // Set log level from block settings
        window.AFS_LOG_LEVEL = '{{ block.settings.log_level }}';
      {% endif %}
    {% endif %}
  </script>
{% else %}
  <script>
    // Disable AFS functionality
    window.AFS_ENABLED = false;
  </script>
{% endif %}

{% schema %}
{
  "name": "Advanced Filter Search Settings",
  "target": "body",
  "settings": [
    {
      "type": "header",
      "content": "Functionality Control"
    },
    {
      "type": "paragraph",
      "content": "Use this toggle to enable or disable the Advanced Filter Search functionality across your theme. When disabled, all AFS sections will be inactive."
    },
    {
      "type": "checkbox",
      "id": "enable_afs",
      "label": "Enable Advanced Filter Search",
      "default": true,
      "info": "Turn this on to activate the Advanced Filter Search functionality. Turn off to disable all AFS features without removing sections."
    },
    {
      "type": "header",
      "content": "Debug & Logging"
    },
    {
      "type": "paragraph",
      "content": "Optional debug logging settings. Enable only when troubleshooting. Keep disabled in production for better performance."
    },
    {
      "type": "checkbox",
      "id": "enable_logging",
      "label": "Enable Debug Logging",
      "default": false,
      "info": "When enabled, logs filter operations, API calls, and performance metrics to the browser console. Disable in production."
    },
    {
      "type": "select",
      "id": "log_level",
      "label": "Log Level",
      "default": "debug",
      "options": [
        {
          "value": "error",
          "label": "Errors Only"
        },
        {
          "value": "warn",
          "label": "Warnings and Errors"
        },
        {
          "value": "info",
          "label": "Info, Warnings, and Errors"
        },
        {
          "value": "debug",
          "label": "All Logs (Debug)"
        }
      ],
      "info": "Choose the level of detail for logging. 'Debug' shows all logs including performance metrics."
    }
  ]
}
{% endschema %}
